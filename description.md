## Концепция системы наград для торговой стратегии с использованием обучения с подкреплением

### Цели и обоснование подхода
Система наград играет критическую роль в обучении агента на финансовых рынках. Награды должны поощрять правильные действия, которые приводят к увеличению прибыли, и наказывать действия, приводящие к потерям. Наша цель – создать награды, которые:

1. Поощряют успешные сделки.
2. Учитывают риски, связанные с открытием и закрытием позиций.
3. Снижают вероятность ненужных действий, таких как частое HOLD.

### Предложенная система наград
1. **BUY (открытие длинной позиции)**:
   - Награда: +1 (поощрение за открытие позиции).
   - Условие: Позволено только в том случае, если нет открытых SHORT позиций.

2. **SELL (открытие короткой позиции)**:
   - Награда: +1 (поощрение за открытие позиции).
   - Условие: Позволено только в том случае, если нет открытых LONG позиций.

3. **HOLD (ни покупка, ни продажа)**:
   - Награда: 0.5 (поощрение за стабильность, чтобы агент не совершал ненужные операции).
   - Условие: Может применяться к любой позиции.

4. **Закрытие LONG (SELL)**:
   - Награда: цена продажи - цена покупки (реализованная прибыль).
   - Условие: может быть только при наличии открытой длинной позиции.

5. **Закрытие SHORT (BUY)**:
   - Награда: цена открытия - цена закрытия (реализованная прибыль).
   - Условие: может быть только при наличии открытой короткой позиции.

6. **Убыток при закрытии**:
   - Если при закрытии позиции была потеря, то награда будет отрицательной (убыток) в соответствии с разницей цен.

### Метрики для оценки эффективности системы наград
1. **Общая прибыль**: Суммарная прибыль (или убыток) торгового алгоритма за период.
2. **Максимальная просадка**: Максимальная потеря (в процентном соотношении) относительно пика капитала.
3. **Коэффициент Шарпа**: Соотношение между средней доходностью и стандартным отклонением доходности, позволяющее оценить рискованность стратегии.
4. **Процент выигрышных сделок**: Доля успешных сделок от общего количества сделок, отражающая качество сигналов для торговли.

### Заключение
Предложенная система наград обеспечит агенту мотивацию для выполнения прибыльных сделок и удержания позиций на протяжении необходимого времени. Учет как наград, так и потерь при закрытии сделок позволяет лучше контролировать динамику торгового алгоритма, способствуя успешному обучению с подкреплением.